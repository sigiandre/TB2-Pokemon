{"remainingRequest":"C:\\Users\\andre\\Desktop\\pokemon\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\andre\\Desktop\\pokemon\\src\\learn\\model.js","dependencies":[{"path":"C:\\Users\\andre\\Desktop\\pokemon\\src\\learn\\model.js","mtime":1621378112000},{"path":"C:\\Users\\andre\\Desktop\\pokemon\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\andre\\Desktop\\pokemon\\node_modules\\babel-loader\\lib\\index.js","mtime":315550800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy9hbmRyZS9EZXNrdG9wL3Bva2Vtb24vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2FuZHJlL0Rlc2t0b3AvcG9rZW1vbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzovVXNlcnMvYW5kcmUvRGVza3RvcC9wb2tlbW9uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzovVXNlcnMvYW5kcmUvRGVza3RvcC9wb2tlbW9uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKCnZhciB0ZiA9IHJlcXVpcmUoIkB0ZW5zb3JmbG93L3RmanMiKTsKCndpbmRvdy50ZiA9IHRmOwoKdmFyIEdlbmVyYXRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdlbmVyYXRvcik7CiAgfSAvLyBDYXJnYSB1biBtb2RlbG8gY3VhbmRvIGNhcmdhIGxhIHDDoWdpbmEgcG9yIHByaW1lcmEgdmV6CgoKICBfY3JlYXRlQ2xhc3MoR2VuZXJhdG9yLCBbewogICAga2V5OiAibG9hZE1vZGVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbG9hZE1vZGVsID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMubG9uZ2VzdExlbmd0aCA9IDEyOwogICAgICAgICAgICAgICAgdGhpcy52b2NhYlNpemUgPSAyODsKICAgICAgICAgICAgICAgIHRoaXMudm9jYWIgPSB7CiAgICAgICAgICAgICAgICAgICIgIjogMCwKICAgICAgICAgICAgICAgICAgIi4iOiAxLAogICAgICAgICAgICAgICAgICAiYSI6IDIsCiAgICAgICAgICAgICAgICAgICJiIjogMywKICAgICAgICAgICAgICAgICAgImMiOiA0LAogICAgICAgICAgICAgICAgICAiZCI6IDUsCiAgICAgICAgICAgICAgICAgICJlIjogNiwKICAgICAgICAgICAgICAgICAgImYiOiA3LAogICAgICAgICAgICAgICAgICAiZyI6IDgsCiAgICAgICAgICAgICAgICAgICJoIjogOSwKICAgICAgICAgICAgICAgICAgImkiOiAxMCwKICAgICAgICAgICAgICAgICAgImoiOiAxMSwKICAgICAgICAgICAgICAgICAgImsiOiAxMiwKICAgICAgICAgICAgICAgICAgImwiOiAxMywKICAgICAgICAgICAgICAgICAgIm0iOiAxNCwKICAgICAgICAgICAgICAgICAgIm4iOiAxNSwKICAgICAgICAgICAgICAgICAgIm8iOiAxNiwKICAgICAgICAgICAgICAgICAgInAiOiAxNywKICAgICAgICAgICAgICAgICAgInEiOiAxOCwKICAgICAgICAgICAgICAgICAgInIiOiAxOSwKICAgICAgICAgICAgICAgICAgInMiOiAyMCwKICAgICAgICAgICAgICAgICAgInQiOiAyMSwKICAgICAgICAgICAgICAgICAgInUiOiAyMiwKICAgICAgICAgICAgICAgICAgInYiOiAyMywKICAgICAgICAgICAgICAgICAgInciOiAyNCwKICAgICAgICAgICAgICAgICAgIngiOiAyNSwKICAgICAgICAgICAgICAgICAgInkiOiAyNiwKICAgICAgICAgICAgICAgICAgInoiOiAyNwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMudm9jYWJJbnZlcnNlID0gewogICAgICAgICAgICAgICAgICAwOiAiICIsCiAgICAgICAgICAgICAgICAgIDE6ICIuIiwKICAgICAgICAgICAgICAgICAgMjogImEiLAogICAgICAgICAgICAgICAgICAzOiAiYiIsCiAgICAgICAgICAgICAgICAgIDQ6ICJjIiwKICAgICAgICAgICAgICAgICAgNTogImQiLAogICAgICAgICAgICAgICAgICA2OiAiZSIsCiAgICAgICAgICAgICAgICAgIDc6ICJmIiwKICAgICAgICAgICAgICAgICAgODogImciLAogICAgICAgICAgICAgICAgICA5OiAiaCIsCiAgICAgICAgICAgICAgICAgIDEwOiAiaSIsCiAgICAgICAgICAgICAgICAgIDExOiAiaiIsCiAgICAgICAgICAgICAgICAgIDEyOiAiayIsCiAgICAgICAgICAgICAgICAgIDEzOiAibCIsCiAgICAgICAgICAgICAgICAgIDE0OiAibSIsCiAgICAgICAgICAgICAgICAgIDE1OiAibiIsCiAgICAgICAgICAgICAgICAgIDE2OiAibyIsCiAgICAgICAgICAgICAgICAgIDE3OiAicCIsCiAgICAgICAgICAgICAgICAgIDE4OiAicSIsCiAgICAgICAgICAgICAgICAgIDE5OiAiciIsCiAgICAgICAgICAgICAgICAgIDIwOiAicyIsCiAgICAgICAgICAgICAgICAgIDIxOiAidCIsCiAgICAgICAgICAgICAgICAgIDIyOiAidSIsCiAgICAgICAgICAgICAgICAgIDIzOiAidiIsCiAgICAgICAgICAgICAgICAgIDI0OiAidyIsCiAgICAgICAgICAgICAgICAgIDI1OiAieCIsCiAgICAgICAgICAgICAgICAgIDI2OiAieSIsCiAgICAgICAgICAgICAgICAgIDI3OiAieiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB0Zi5sb2FkTGF5ZXJzTW9kZWwoIi9teS1tb2RlbC10cmFpbmVkLTMwMC5qc29uIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHRoaXMubW9kZWwgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9hZE1vZGVsKCkgewogICAgICAgIHJldHVybiBfbG9hZE1vZGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsb2FkTW9kZWw7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjcmVhdGVNb2RlbEFuZFRyYWluIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfY3JlYXRlTW9kZWxBbmRUcmFpbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoZGF0YXNldCwgbG9nKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMucHJlcHJvY2VzcyhkYXRhc2V0LCBsb2cpOyAvLyBDcmVhIGNvbmp1bnRvcyBkZSB2b2NhYnVsYXJpbyB5IGVudHJlbmFtaWVudG8KCiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU1vZGVsKGxvZyk7IC8vIENyZWEgZWwgbW9kZWxvIFRGanMgYSBwYXJ0aXIgZGUgZGltZW5zaW9uZXMgYW50ZXJpb3Jlcy4KICAgICAgICAgICAgICAgIC8vIEVudHJlbmEgZWwgbW9kZWxvCgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHRoaXMubW9kZWwuZml0KHRoaXMudHJhaW5YLCB0aGlzLnRyYWluWSwgewogICAgICAgICAgICAgICAgICBiYXRjaFNpemU6IDY0LAogICAgICAgICAgICAgICAgICBlcG9jaHM6IDMwMSwKICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBbbmV3IHRmLkN1c3RvbUNhbGxiYWNrKHsKICAgICAgICAgICAgICAgICAgICBvbkVwb2NoRW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX29uRXBvY2hFbmQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGVwb2NoLCBsb2dzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCLDiXBvY2EgIiArIGVwb2NoICsgIi8zMDAgdGVybWluYWRhIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcG9jaCAlIDI1ID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZ2lzdHJhIDUgbm9tYnJlcyBjYWRhIDI1IMOpcG9jYXMgZGUgZW50cmVuYW1pZW50bwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCJOb21icmUgZGUgbGEgcHJ1ZWJhOiAiICsgX3RoaXMucHJlZGljdCgiIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCJOb21icmUgZGUgbGEgcHJ1ZWJhOiAiICsgX3RoaXMucHJlZGljdCgiIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCJOb21icmUgZGUgbGEgcHJ1ZWJhOiAiICsgX3RoaXMucHJlZGljdCgiIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCJOb21icmUgZGUgbGEgcHJ1ZWJhOiAiICsgX3RoaXMucHJlZGljdCgiIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCJOb21icmUgZGUgbGEgcHJ1ZWJhOiAiICsgX3RoaXMucHJlZGljdCgiIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gb25FcG9jaEVuZChfeDMsIF94NCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX29uRXBvY2hFbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcG9jaEVuZDsKICAgICAgICAgICAgICAgICAgICB9KCkKICAgICAgICAgICAgICAgICAgfSldLAogICAgICAgICAgICAgICAgICB5aWVsZEV2ZXJ5OiA1MDAwCiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZU1vZGVsQW5kVHJhaW4oX3gsIF94MikgewogICAgICAgIHJldHVybiBfY3JlYXRlTW9kZWxBbmRUcmFpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY3JlYXRlTW9kZWxBbmRUcmFpbjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInByZXByb2Nlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZXByb2Nlc3MoZGF0YXNldCwgbG9nKSB7CiAgICAgIHZhciBfU3RyaW5nJHByb3RvdHlwZSwKICAgICAgICAgIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgbmFtZXMgPSBkYXRhc2V0LnRvTG93ZXJDYXNlKCkuc3BsaXQoIlxuIik7CiAgICAgIHZhciBsb25nZXN0TmFtZSA9ICIiOyAvLyBPYnRpZW5lIGVsIG5vbWJyZSBtw6FzIGxhcmdvLCBwb3IgbG8gcXVlIHRvZG9zIGxvcyBkZW3DoXMgbm9tYnJlcyBzb24gbcOhcyBwZXF1ZcOxb3MKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBuYW1lc1tpXSA9IG5hbWVzW2ldICsgIi4iOwoKICAgICAgICBpZiAobmFtZXNbaV0uc3BsaXQoIiIpLmxlbmd0aCA+IGxvbmdlc3ROYW1lLnNwbGl0KCIiKS5sZW5ndGgpIHsKICAgICAgICAgIGxvbmdlc3ROYW1lID0gbmFtZXNbaV07CiAgICAgICAgfQogICAgICB9CgogICAgICBsb2coIk5vbWJyZSBtw6FzIGxhcmdvOiAiICsgbG9uZ2VzdE5hbWUpOyAvLyBDcmVhIHZvY2FidWxhcmlvIGRlIHRvZG9zIGxvcyBjYXJhY3RlcmVzIGluZGl2aWR1YWxlcyBxdWUgc2UgZW5jdWVudHJhbiBlbiBlbCBjb25qdW50byBkZSBkYXRvcwoKICAgICAgdmFyIHVuaXF1ZUNoYXJzID0gKF9TdHJpbmckcHJvdG90eXBlID0gU3RyaW5nLnByb3RvdHlwZSkuY29uY2F0LmFwcGx5KF9TdHJpbmckcHJvdG90eXBlLCBfdG9Db25zdW1hYmxlQXJyYXkobmV3IFNldChuYW1lcy5qb2luKCIiKSkpKS5zcGxpdCgiIikuc29ydCgpOwoKICAgICAgdGhpcy52b2NhYiA9IHt9OwogICAgICB0aGlzLnZvY2FiSW52ZXJzZSA9IHt9OwoKICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHVuaXF1ZUNoYXJzLmxlbmd0aDsgX2krKykgewogICAgICAgIHZhciBjaGFyID0gdW5pcXVlQ2hhcnNbX2ldOwogICAgICAgIHRoaXMudm9jYWJbY2hhcl0gPSBfaTsKICAgICAgICB0aGlzLnZvY2FiSW52ZXJzZVtfaV0gPSBjaGFyOwogICAgICB9CgogICAgICBsb2coIlZvY2FidWxhcmlvOiAiICsgT2JqZWN0LmtleXModGhpcy52b2NhYikpOwogICAgICB0aGlzLnZvY2FiU2l6ZSA9IE9iamVjdC5rZXlzKHRoaXMudm9jYWIpLmxlbmd0aDsKICAgICAgdGhpcy5sb25nZXN0TGVuZ3RoID0gbG9uZ2VzdE5hbWUubGVuZ3RoIC0gMTsgLy8gQ3JlYSBtYXRyaWNlcyBkZSB2ZWN0b3JlcyBkZSBlbnRyYWRhIHkgc2FsaWRhIGNvbnZpcnRpZW5kbyBsb3Mgbm9tYnJlcyBlbgogICAgICAvLyBvbmUtaG90cyBkZSB0YW1hw7FvIGlndWFsIGFsIHRhbWHDsW8gbcOhcyBsYXJnbyAobGxlbm8gZGUgY2Vyb3MgZW4gZWwgcmVzdG8pCgogICAgICB2YXIgYXJyYXlOYW1lc0luID0gW107CiAgICAgIHZhciBhcnJheU5hbWVzT3V0ID0gW107CiAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICB2YXIgd29yZEluID0gbmFtZS5zcGxpdCgiIikuc2xpY2UoMCwgbmFtZS5zcGxpdCgiIikubGVuZ3RoIC0gMSk7CiAgICAgICAgdmFyIHdvcmRPdXQgPSBuYW1lLnNwbGl0KCIiKS5zbGljZSgxLCBuYW1lLnNwbGl0KCIiKS5sZW5ndGgpOwogICAgICAgIGFycmF5TmFtZXNJbi5wdXNoKF90aGlzMi5jb252ZXJ0VG9PbmVIb3Qod29yZEluLCBfdGhpczIudm9jYWIpKTsKICAgICAgICBhcnJheU5hbWVzT3V0LnB1c2goX3RoaXMyLmNvbnZlcnRUb09uZUhvdCh3b3JkT3V0LCBfdGhpczIudm9jYWIpKTsKICAgICAgfSk7CiAgICAgIGxvZygiTsO6bWVybyBkZSBtdWVzdHJhczogIiArIGFycmF5TmFtZXNJbi5sZW5ndGgpOyAvLyBDb252aWVydGUgbWF0cmljZXMgZW4gdGVuc29yZXMgZGUgZW50cmVuYW1pZW50byBkZSBlbnRyYWRhIHkgc2FsaWRhCgogICAgICB0aGlzLnRyYWluWCA9IHRmLnRlbnNvcjNkKGFycmF5TmFtZXNJbik7CiAgICAgIHRoaXMudHJhaW5ZID0gdGYudGVuc29yM2QoYXJyYXlOYW1lc091dCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlTW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZU1vZGVsKGxvZykgewogICAgICAvLyBFbCBtb2RlbG8gZXMgc29sbyB1biB0aXBvIHNlY3VlbmNpYWwgY29uIGRvcyBjYXBhcyAobHN0bSB5IGRlbnNvKQogICAgICAvLyBwYXJhIGxhIHNhbGlkYQogICAgICB0aGlzLm1vZGVsID0gdGYuc2VxdWVudGlhbCgpOwogICAgICB0aGlzLm1vZGVsLmFkZCh0Zi5sYXllcnMubHN0bSh7CiAgICAgICAgdW5pdHM6IDEyOCwKICAgICAgICBpbnB1dFNoYXBlOiBbdGhpcy5sb25nZXN0TGVuZ3RoLCB0aGlzLnZvY2FiU2l6ZV0sCiAgICAgICAgcmV0dXJuU2VxdWVuY2VzOiB0cnVlCiAgICAgIH0pKTsKICAgICAgdGhpcy5tb2RlbC5hZGQodGYubGF5ZXJzLmRlbnNlKHsKICAgICAgICB1bml0czogdGhpcy52b2NhYlNpemUsCiAgICAgICAgYWN0aXZhdGlvbjogInNvZnRtYXgiCiAgICAgIH0pKTsKICAgICAgdGhpcy5tb2RlbC5jb21waWxlKHsKICAgICAgICBsb3NzOiAiY2F0ZWdvcmljYWxDcm9zc2VudHJvcHkiLAogICAgICAgIG9wdGltaXplcjogImFkYW0iCiAgICAgIH0pOwogICAgICB0aGlzLm1vZGVsLnN1bW1hcnkoKTsKICAgICAgbG9nKCJSZXN1bWVuIGltcHJlc28gZW4gbGEgY29uc29sYSIpOwogICAgfSAvLyBNdWVzdHJhIHVuYSBwYWxhYnJhIGNvbXBsZXRhIGNvbiBlbCBtb2RlbG8uIHdvcmRCZWdpbm5pbmcgcHVlZGUgZXN0YXIgdmFjw61vLCBwb3IgbG8gcXVlIGVzIHVuCiAgICAvLyBwYWxhYnJhIGNvbXBsZXRhbWVudGUgbnVldmEsIG8gcHVlZGUgdGVuZXIgYWxndW5vcyBjYXJhY3RlcmVzIHBhcmEgY29tcGxldGFybGEuCgogIH0sIHsKICAgIGtleTogInByZWRpY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZWRpY3Qod29yZEJlZ2lubmluZykgewogICAgICB2YXIgbmV3TmFtZSA9IHdvcmRCZWdpbm5pbmcuc3BsaXQoIiIpOwogICAgICB2YXIgeCA9IHRmLnplcm9zKFsxLCB0aGlzLmxvbmdlc3RMZW5ndGgsIHRoaXMudm9jYWJTaXplXSk7IC8vIENyZWEgdW4gdGVuc29yIGRlIGNlcm9zIGRlbCB0YW1hw7FvIGRlIGxhIHBhbGFicmEKCiAgICAgIHZhciB4QXJyID0geC5hcnJheVN5bmMoKTsgLy8gUmVsbGVuYSBlbCB0ZW5zb3IgY29uIHB1bnRvcyDDum5pY29zIGNvcnJlc3BvbmRpZW50ZXMgYSBsb3MgY2FyYWN0ZXJlcyBkZSBsYSBwYWxhYnJhIFByaW5jaXBpbwoKICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgd29yZEJlZ2lubmluZy5zcGxpdCgiIikubGVuZ3RoOyBfaTIrKykgewogICAgICAgIHZhciBjaGFyID0gd29yZEJlZ2lubmluZy5zcGxpdCgiIilbX2kyXTsKCiAgICAgICAgeEFyclswXVtfaTJdW3RoaXMudm9jYWJbY2hhcl1dID0gMTsKICAgICAgfQoKICAgICAgeCA9IHRmLnRlbnNvcjNkKHhBcnIpOwogICAgICB2YXIgZW5kID0gZmFsc2U7CiAgICAgIHZhciBpID0gd29yZEJlZ2lubmluZy5zcGxpdCgiIikubGVuZ3RoOyAvLyBJdGVyYSBwYXJhIHByb2JhciBjYWRhIG51ZXZvIHBlcnNvbmFqZSBjb24gZWwgbnVldm8gbm9tYnJlCgogICAgICB3aGlsZSAoIWVuZCkgewogICAgICAgIHZhciBuZXdDaGFyYWN0ZXIgPSB2b2lkIDA7CgogICAgICAgIGlmIChpID09IHRoaXMubG9uZ2VzdExlbmd0aCkgewogICAgICAgICAgLy8gU2kgZXMgZGVtYXNpYWRvIGxhcmdvLCB0ZXJtw61uZWxvIGNvbiB1biBwdW50by4KICAgICAgICAgIG5ld0NoYXJhY3RlciA9ICIuIjsKICAgICAgICAgIG5ld05hbWUucHVzaChuZXdDaGFyYWN0ZXIpOwogICAgICAgICAgZW5kID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gUHJlZGljZSBudWV2byBjYXLDoWN0ZXIgZGUgdG9kYXMgbGFzIGFudGVyaW9yZXMuCiAgICAgICAgICB2YXIgcHJvYnMgPSB0aGlzLm1vZGVsLnByZWRpY3QoeCkuYXJyYXlTeW5jKClbMF1baV07CiAgICAgICAgICB2YXIgcHJvYnNTdW0gPSAwOwogICAgICAgICAgcHJvYnMuZm9yRWFjaChmdW5jdGlvbiAocHJvYikgewogICAgICAgICAgICBwcm9ic1N1bSArPSBwcm9iOwogICAgICAgICAgfSk7CgogICAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgcHJvYnMubGVuZ3RoOyBfaTMrKykgewogICAgICAgICAgICBwcm9ic1tfaTNdID0gcHJvYnNbX2kzXSAvIHByb2JzU3VtOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBjaGFySWQgPSByYW5kb21DaG9pY2VzKHByb2JzLCAxKVswXTsKICAgICAgICAgIG5ld0NoYXJhY3RlciA9IHRoaXMudm9jYWJJbnZlcnNlW2NoYXJJZF07CiAgICAgICAgICBuZXdOYW1lLnB1c2gobmV3Q2hhcmFjdGVyKTsKCiAgICAgICAgICB2YXIgX3hBcnIgPSB4LmFycmF5U3luYygpOwoKICAgICAgICAgIF94QXJyWzBdW2ldW2NoYXJJZF0gPSAxOwogICAgICAgICAgeCA9IHRmLnRlbnNvcjNkKF94QXJyKTsKCiAgICAgICAgICBpZiAobmV3Q2hhcmFjdGVyID09ICIuIikgewogICAgICAgICAgICBlbmQgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGkgKz0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXdOYW1lLmpvaW4oIiIpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbnZlcnRUb09uZUhvdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29udmVydFRvT25lSG90KHdvcmQsIHZvY2FiKSB7CiAgICAgIHZhciBlbmNvZGVkV29yZCA9IFtdOyAvLyBDb252aWVydGUgZW4gb25lLWhvdCB0b2RvcyBsb3MgcGVyc29uYWplcyBkZWwgbXVuZG8KCiAgICAgIHdvcmQuZm9yRWFjaChmdW5jdGlvbiAoY2hhcikgewogICAgICAgIHZhciBjaGFyT25lSG90ID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgT2JqZWN0LmtleXModm9jYWIpLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodm9jYWJbY2hhcl0gPT0gaSkgewogICAgICAgICAgICBjaGFyT25lSG90LnB1c2goMSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjaGFyT25lSG90LnB1c2goMCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBlbmNvZGVkV29yZC5wdXNoKGNoYXJPbmVIb3QpOwogICAgICB9KTsgLy8gWSBjb252ZXJ0aXIgYSB1bmEgbWF0cml6IGRlIGNlcm9zIHRvZG8gbG8gcXVlIHF1ZWRhIHBvciBtw6FzIHRpZW1wbwoKICAgICAgZm9yICh2YXIgaSA9IHdvcmQubGVuZ3RoOyBpIDwgdGhpcy5sb25nZXN0TGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgY2hhck9uZUhvdCA9IFtdOwoKICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCBPYmplY3Qua2V5cyh2b2NhYikubGVuZ3RoOyBfaTQrKykgewogICAgICAgICAgY2hhck9uZUhvdC5wdXNoKDApOwogICAgICAgIH0KCiAgICAgICAgZW5jb2RlZFdvcmQucHVzaChjaGFyT25lSG90KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGVuY29kZWRXb3JkOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEdlbmVyYXRvcjsKfSgpOwoKZnVuY3Rpb24gcmFuZG9tQ2hvaWNlKHApIHsKICB2YXIgcm5kID0gcC5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHsKICAgIHJldHVybiBhICsgYjsKICB9KSAqIE1hdGgucmFuZG9tKCk7CiAgcmV0dXJuIHAuZmluZEluZGV4KGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gKHJuZCAtPSBhKSA8IDA7CiAgfSk7Cn0KCmZ1bmN0aW9uIHJhbmRvbUNob2ljZXMocCwgY291bnQpIHsKICByZXR1cm4gQXJyYXkuZnJvbShBcnJheShjb3VudCksIHJhbmRvbUNob2ljZS5iaW5kKG51bGwsIHApKTsKfQoKZXhwb3J0IGRlZmF1bHQgR2VuZXJhdG9yOw=="},{"version":3,"sources":["C:/Users/andre/Desktop/pokemon/src/learn/model.js"],"names":["tf","require","window","Generator","longestLength","vocabSize","vocab","vocabInverse","loadLayersModel","model","dataset","log","preprocess","createModel","fit","trainX","trainY","batchSize","epochs","callbacks","CustomCallback","onEpochEnd","epoch","logs","predict","yieldEvery","names","toLowerCase","split","longestName","i","length","uniqueChars","String","prototype","concat","Set","join","sort","char","Object","keys","arrayNamesIn","arrayNamesOut","forEach","name","wordIn","slice","wordOut","push","convertToOneHot","tensor3d","sequential","add","layers","lstm","units","inputShape","returnSequences","dense","activation","compile","loss","optimizer","summary","wordBeginning","newName","x","zeros","xArr","arraySync","end","newCharacter","probs","probsSum","prob","charId","randomChoices","word","encodedWord","charOneHot","randomChoice","p","rnd","reduce","a","b","Math","random","findIndex","count","Array","from","bind"],"mappings":"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","sourcesContent":["const tf = require(\"@tensorflow/tfjs\")\nwindow.tf = tf;\n\nclass Generator {\n    constructor() {}\n\n    // Carga un modelo cuando carga la página por primera vez\n    async loadModel() {\n        this.longestLength = 12\n        this.vocabSize = 28\n        this.vocab = {\n            \" \": 0, \".\": 1, \"a\": 2, \"b\": 3, \"c\": 4, \"d\": 5, \"e\": 6, \"f\": 7, \"g\": 8, \"h\": 9, \"i\": 10, \"j\": 11, \"k\": 12, \"l\": 13, \"m\": 14, \"n\": 15, \"o\": 16, \"p\": 17, \"q\": 18, \"r\": 19, \"s\": 20, \"t\": 21, \"u\": 22, \"v\": 23, \"w\": 24, \"x\": 25, \"y\": 26, \"z\": 27\n        }\n        this.vocabInverse = {\n            0: \" \", 1: \".\", 2: \"a\", 3: \"b\", 4: \"c\", 5: \"d\", 6: \"e\", 7: \"f\", 8: \"g\", 9: \"h\", 10: \"i\", 11: \"j\", 12: \"k\", 13: \"l\", 14: \"m\", 15: \"n\", 16: \"o\", 17: \"p\", 18: \"q\", 19: \"r\", 20: \"s\", 21: \"t\", 22: \"u\", 23: \"v\", 24: \"w\", 25: \"x\", 26: \"y\", 27: \"z\"\n        }\n        this.model = await tf.loadLayersModel(\"/my-model-trained-300.json\")\n    }\n\n    async createModelAndTrain(dataset, log) {\n        this.preprocess(dataset, log) // Crea conjuntos de vocabulario y entrenamiento\n        this.createModel(log) // Crea el modelo TFjs a partir de dimensiones anteriores.\n        // Entrena el modelo\n        return this.model.fit(this.trainX, this.trainY, { \n            batchSize: 64,\n            epochs: 301,\n            callbacks: [\n                new tf.CustomCallback({\n                    onEpochEnd: async(epoch, logs) => {\n                        log(\"Época \" + epoch + \"/300 terminada\")\n                        if (epoch % 25 == 0) {\n                            // Registra 5 nombres cada 25 épocas de entrenamiento\n                            log(\"Nombre de la prueba: \" + this.predict(\"\"))\n                            log(\"Nombre de la prueba: \" + this.predict(\"\"))\n                            log(\"Nombre de la prueba: \" + this.predict(\"\"))\n                            log(\"Nombre de la prueba: \" + this.predict(\"\"))\n                            log(\"Nombre de la prueba: \" + this.predict(\"\"))\n                            log(\"===========================\")\n                        }\n                    }\n                })\n            ],\n            yieldEvery: 5000\n        })\n    }\n\n    preprocess(dataset, log) {\n        let names = dataset.toLowerCase().split(\"\\n\")\n        let longestName = \"\"\n        // Obtiene el nombre más largo, por lo que todos los demás nombres son más pequeños\n        for (let i = 0; i < names.length; i++) {\n            names[i] = names[i] + \".\"\n            if (names[i].split(\"\").length > longestName.split(\"\").length) {\n                longestName = names[i]\n            }\n        }\n        log(\"Nombre más largo: \" + longestName)\n\n        // Crea vocabulario de todos los caracteres individuales que se encuentran en el conjunto de datos\n        let uniqueChars = String.prototype.concat(...new Set(names.join(\"\"))).split(\"\").sort()\n        this.vocab = {}\n        this.vocabInverse = {}\n        for (let i = 0; i < uniqueChars.length; i++) {\n            const char = uniqueChars[i];\n            this.vocab[char] = i\n            this.vocabInverse[i] = char\n        }\n        log(\"Vocabulario: \" + Object.keys(this.vocab))\n\n        this.vocabSize = Object.keys(this.vocab).length\n        this.longestLength = longestName.length - 1\n\n        // Crea matrices de vectores de entrada y salida convirtiendo los nombres en\n        // one-hots de tamaño igual al tamaño más largo (lleno de ceros en el resto)\n        let arrayNamesIn = []\n        let arrayNamesOut = []\n        names.forEach(name => {\n            const wordIn = name.split(\"\").slice(0, name.split(\"\").length - 1)\n            const wordOut = name.split(\"\").slice(1, name.split(\"\").length)\n            arrayNamesIn.push(this.convertToOneHot(wordIn, this.vocab))\n            arrayNamesOut.push(this.convertToOneHot(wordOut, this.vocab))\n        });\n\n        log(\"Número de muestras: \" + arrayNamesIn.length)\n\n        // Convierte matrices en tensores de entrenamiento de entrada y salida\n        this.trainX = tf.tensor3d(arrayNamesIn)\n        this.trainY = tf.tensor3d(arrayNamesOut)\n    }\n\n    createModel(log) {\n        // El modelo es solo un tipo secuencial con dos capas (lstm y denso)\n        // para la salida\n        this.model = tf.sequential()\n        this.model.add(tf.layers.lstm({\n            units: 128,\n            inputShape: [this.longestLength, this.vocabSize],\n            returnSequences: true\n        }))\n        this.model.add(tf.layers.dense({ \n            units: this.vocabSize, activation: \"softmax\" \n        }))\n\n        this.model.compile({ \n            loss: \"categoricalCrossentropy\",\n            optimizer: \"adam\"\n        })\n        \n        this.model.summary()\n    \n        log(\"Resumen impreso en la consola\")\n    }\n\n    // Muestra una palabra completa con el modelo. wordBeginning puede estar vacío, por lo que es un\n    // palabra completamente nueva, o puede tener algunos caracteres para completarla.\n    predict(wordBeginning) {\n        let newName = wordBeginning.split(\"\")\n        let x = tf.zeros([1, this.longestLength, this.vocabSize]) // Crea un tensor de ceros del tamaño de la palabra\n        let xArr = x.arraySync()\n        // Rellena el tensor con puntos únicos correspondientes a los caracteres de la palabra Principio\n        for (let i = 0; i < wordBeginning.split(\"\").length; i++) {\n            const char = wordBeginning.split(\"\")[i];\n            xArr[0][i][this.vocab[char]] = 1\n        }\n        x = tf.tensor3d(xArr)\n        let end = false\n        let i = wordBeginning.split(\"\").length\n\n        // Itera para probar cada nuevo personaje con el nuevo nombre\n        while (!end) {\n            let newCharacter\n            if (i == this.longestLength) {\n                // Si es demasiado largo, termínelo con un punto.\n                newCharacter = \".\"\n                newName.push(newCharacter)\n                end = true\n            } else {\n                // Predice nuevo carácter de todas las anteriores.\n                let probs = this.model.predict(x).arraySync()[0][i]\n                let probsSum = 0\n                probs.forEach(prob => {\n                    probsSum += prob\n                });\n                for (let i = 0; i < probs.length; i++) {\n                    probs[i] = probs[i] / probsSum;\n                }\n\n                let charId = randomChoices(probs, 1)[0]\n                newCharacter = this.vocabInverse[charId]\n                newName.push(newCharacter)\n                let xArr = x.arraySync()\n                xArr[0][i][charId] = 1\n                x = tf.tensor3d(xArr)\n\n                if (newCharacter == \".\") {\n                    end = true\n                }\n\n                i += 1\n            }\n        }\n\n        return newName.join(\"\")\n    }\n\n    convertToOneHot(word, vocab) {\n        let encodedWord = []\n        // Convierte en one-hot todos los personajes del mundo\n        word.forEach(char => {\n            let charOneHot = []\n            for (let i = 0; i < Object.keys(vocab).length; i++) {\n                if (vocab[char] == i) {\n                    charOneHot.push(1)\n                } else {\n                    charOneHot.push(0)\n                }                \n            }\n            encodedWord.push(charOneHot)\n        });\n\n        // Y convertir a una matriz de ceros todo lo que queda por más tiempo\n        for (let i = word.length; i < this.longestLength; i++) {\n            let charOneHot = []\n            for (let i = 0; i < Object.keys(vocab).length; i++) {\n                charOneHot.push(0)\n            }\n            encodedWord.push(charOneHot)\n        }\n\n        return encodedWord\n    }\n}\n\nfunction randomChoice(p) {\n    let rnd = p.reduce( (a, b) => a + b ) * Math.random();\n    return p.findIndex( a => (rnd -= a) < 0 );\n}\n\nfunction randomChoices(p, count) {\n    return Array.from(Array(count), randomChoice.bind(null, p));\n}\n\nexport default Generator"]}]}